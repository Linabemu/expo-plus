
  <% if params[:index] == "map" %>
    <!-- map  -->

    <div class="map_style" style="width: 100%; height: calc(100vh - 78px) ;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>

  <% else  %>
    <!-- index  -->
<div class="container-index">

    <% @expos.each do |expo| %>

      <div class="card-index">

        <div class="image-box">

          <%= cl_image_tag(expo.photo.key, height: 292, width: 368, :quality=>"auto", :fetch_format=>:auto, gravity:"faces" , :crop=>"fill", class: "image-card-index") %>

          <%= link_to expo_path(expo) do %>
            <div class="img-gradient"></div>
          <% end %>

          <%= link_to expo_wishes_path(expo, user_id: current_user.id), 'data-turbo-method': :post do %>
            <i class="fa-solid fa-heart heart-icon <%= current_user.wishes.where(expo_id: expo.id).empty? ? "" : "wish" %>"></i>
          <% end %>

        </div>

        <h2 class="title"><%= expo.title  %></h2>

        <div class="d-flex justify-content-between">
          <p class="subtitle"><%= expo.place.address_name  %></p>
          <p class="subtitle arrondissement"><%= expo.place.address_city  %> <%= expo.place.address_zipcode.split(//).last(2).join %></p>
        </div>

        <p class="subtitle">Du <%= (l expo.date_start, format: "%d %B") %> au <%= (l expo.date_end, format: "%d %B %Y") %></p>

        <% expo.tags.each do |tag| %>
        <div class="tag-expo subtitle"><%= tag %></div>
        <% end %>
        <hr>

      </div>

    <% end %>

  <% end  %>

</div>
